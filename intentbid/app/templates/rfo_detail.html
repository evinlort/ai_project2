{% extends "base.html" %}

{% block content %}
<section class="card">
  <span class="pill">RFO #{{ rfo.id }}</span>
  <h2>{{ rfo.category }}</h2>
  <p class="muted">Buyer request (RFO) and Vendor offer terminology keeps the dashboard aligned.</p>
  <p class="muted">Status: {{ rfo.status }}</p>
  <p class="muted">Constraints: {{ rfo.constraints }}</p>
  <p class="muted">Preferences: {{ rfo.preferences }}</p>
</section>

<section class="grid two" style="margin-top: 24px;">
  <div class="card">
    <h3>Submit an offer</h3>
    <form method="post" action="/dashboard/rfos/{{ rfo.id }}/offers">
      <input type="hidden" name="api_key" value="{{ api_key }}" />
      <label for="price_amount">Price amount</label>
      <input id="price_amount" name="price_amount" type="number" step="0.01" required />

      <label for="currency">Currency</label>
      <input id="currency" name="currency" type="text" value="USD" required />

      <label for="delivery_eta_days">Delivery ETA (days)</label>
      <input id="delivery_eta_days" name="delivery_eta_days" type="number" required />

      <label for="warranty_months">Warranty months</label>
      <input id="warranty_months" name="warranty_months" type="number" required />

      <label for="return_days">Return days</label>
      <input id="return_days" name="return_days" type="number" required />

      <label>
        <input type="checkbox" name="stock" /> In stock
      </label>

      <button type="submit" class="secondary">Submit offer</button>
    </form>
  </div>

  <div class="card">
    <h3>Existing offers</h3>
    {% if offers %}
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Price</th>
          <th>ETA</th>
          <th>Warranty</th>
          <th>Stock</th>
        </tr>
      </thead>
      <tbody>
        {% for offer in offers %}
        <tr>
          <td>{{ offer.id }}</td>
          <td>{{ offer.price_amount }} {{ offer.currency }}</td>
          <td>{{ offer.delivery_eta_days }} days</td>
          <td>{{ offer.warranty_months }} months</td>
          <td>{{ "Yes" if offer.stock else "No" }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p class="muted">No offers yet.</p>
    {% endif %}
  </div>
</section>
{% endblock %}
