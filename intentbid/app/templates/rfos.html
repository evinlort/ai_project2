{% extends "base.html" %}

{% block content %}
<section class="card">
  <h2>Open requests for offer</h2>
  <p class="muted">Buyer request (RFO) and Vendor offer terminology keeps the dashboard aligned.</p>
  <p class="muted">{{ rfos | length }} active briefs ready for your bids.</p>
</section>

<section class="card" style="margin-top: 24px;">
  <form method="get">
    <input type="hidden" name="api_key" value="{{ api_key }}" />
    <div class="grid two">
      <div class="stack">
        <label for="category">Category</label>
        <input id="category" name="category" type="text" value="{{ request.query_params.get('category', '') }}" />
      </div>
      <div class="stack">
        <label for="budget_min">Budget min</label>
        <input id="budget_min" name="budget_min" type="number" step="0.01" value="{{ request.query_params.get('budget_min', '') }}" />
      </div>
      <div class="stack">
        <label for="budget_max">Budget max</label>
        <input id="budget_max" name="budget_max" type="number" step="0.01" value="{{ request.query_params.get('budget_max', '') }}" />
      </div>
      <div class="stack">
        <label for="deadline_max">Deadline (days)</label>
        <input id="deadline_max" name="deadline_max" type="number" step="1" value="{{ request.query_params.get('deadline_max', '') }}" />
      </div>
    </div>
    <button type="submit" class="secondary">Apply filters</button>
  </form>
</section>

<section class="grid two" style="margin-top: 24px;">
  {% for rfo in rfos %}
  <article class="card">
    <span class="pill">RFO #{{ rfo.id }}</span>
    <h3>{{ rfo.category }}</h3>
    <p class="muted">Created {{ rfo.created_at.strftime('%Y-%m-%d') }}</p>
    <p class="muted">Budget max: {{ rfo.budget_max if rfo.budget_max is not none else "n/a" }}</p>
    <a href="/dashboard/rfos/{{ rfo.id }}?api_key={{ api_key }}">View details</a>
  </article>
  {% else %}
  <article class="card">
    <p class="muted">No open RFOs yet. Check back soon.</p>
  </article>
  {% endfor %}
</section>
{% endblock %}
